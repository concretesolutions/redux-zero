{"version":3,"file":"redux-zero.min.js","sources":["../src/utils/shallowEqual.ts","../src/components/Provider.tsx","../src/store/createStore.ts","../src/components/connect.tsx"],"sourcesContent":["export default function shallowEqual(a, b) {\n  for (const i in a) if (a[i] !== b[i]) return false\n  for (const i in b) if (!(i in a)) return false\n  return true\n}\n","import * as React from \"react\"\n\nimport Props from \"../interfaces/Props\"\n\nexport default class Provider extends React.Component<Props, {}> {\n  render() {\n    const { children, store } = this.props\n\n    // Passing the store down to the children without using the context API\n    const childrenWithProps = React.cloneElement(\n      children as React.ReactElement<any>,\n      { store }\n    )\n\n    return React.Children.only(childrenWithProps)\n  }\n}\n","export default function createStore(state = {}) {\n  const listeners = []\n  return {\n    setState(update) {\n      state = { ...state, ...update }\n      listeners.forEach(f => f(state))\n    },\n    subscribe(f) {\n      listeners.push(f)\n    },\n    unsubscribe(f) {\n      const i = listeners.indexOf(f)\n      if (i > -1) {\n        listeners.splice(i, 1)\n      }\n    },\n    getState() {\n      return state\n    }\n  }\n}\n","import * as React from \"react\"\nimport shallowEqual from \"../utils/shallowEqual\"\n\nimport Props from \"../interfaces/Props\"\n\nexport default function connect(mapToProps) {\n  return Child =>\n    class Connected extends React.Component<Props, {}> {\n      state = this.getProps()\n      componentWillMount() {\n        this.props.store.subscribe(this.update)\n      }\n      componentWillUnmount() {\n        this.props.store.unsubscribe(this.update)\n      }\n      getProps() {\n        const state = (this.props.store && this.props.store.getState()) || {}\n        return mapToProps(state, this.props)\n      }\n      update = () => {\n        const mapped = this.getProps()\n        if (!shallowEqual(mapped, this.state)) {\n          this.setState(mapped)\n        }\n      }\n      render() {\n        return (\n          <Child store={this.props.store} {...this.props} {...this.state} />\n        )\n      }\n    }\n}\n"],"names":["a","b","i","tslib_1.__extends","Provider","_a","children","store","childrenWithProps","React.cloneElement","React.Children","only","React.Component","state","listeners","setState","update","forEach","f","subscribe","push","unsubscribe","indexOf","splice","getState","mapToProps","Child","_this","getProps","mapped","shallowEqual","Connected","this","props","React.createElement"],"mappings":"2WAAqCA,EAAGC,GACtC,IAAK,IAAMC,KAAKF,EAAG,GAAIA,EAAEE,KAAOD,EAAEC,GAAI,OAAO,EAC7C,IAAK,IAAMA,KAAKD,EAAG,KAAMC,KAAKF,GAAI,OAAO,EACzC,OAAO,gVCCT,4DAYA,OAZsCG,OACpCC,mBAAA,WACQ,IAAAC,aAAEC,aAAUC,UAGZC,EAAoBC,eACxBH,GACEC,UAGJ,OAAOG,WAAeC,KAAKH,OAVOI,oCCJFC,gBAAAA,MAClC,IAAMC,KACN,OACEC,kBAASC,GACPH,OAAaA,EAAUG,GACvBF,EAAUG,QAAQ,SAAAC,GAAK,OAAAA,EAAEL,MAE3BM,mBAAUD,GACRJ,EAAUM,KAAKF,IAEjBG,qBAAYH,GACV,IAAMhB,EAAIY,EAAUQ,QAAQJ,GACxBhB,GAAK,GACPY,EAAUS,OAAOrB,EAAG,IAGxBsB,oBACE,OAAOX,wBCZmBY,GAC9B,OAAO,SAAAC,GACL,mBAAA,aAAA,qDACEC,QAAQA,EAAKC,WAWbD,SAAS,WACP,IAAME,EAASF,EAAKC,WACfE,EAAaD,EAAQF,EAAKd,QAC7Bc,EAAKZ,SAASc,MAQpB,OAvBwB1B,OAEtB4B,+BAAA,WACEC,KAAKC,MAAM1B,MAAMY,UAAUa,KAAKhB,SAElCe,iCAAA,WACEC,KAAKC,MAAM1B,MAAMc,YAAYW,KAAKhB,SAEpCe,qBAAA,WACE,IAAMlB,EAASmB,KAAKC,MAAM1B,OAASyB,KAAKC,MAAM1B,MAAMiB,eACpD,OAAOC,EAAWZ,EAAOmB,KAAKC,QAQhCF,mBAAA,WACE,OACEG,gBAACR,KAAMnB,MAAOyB,KAAKC,MAAM1B,OAAWyB,KAAKC,MAAWD,KAAKnB,YApBvCD"}