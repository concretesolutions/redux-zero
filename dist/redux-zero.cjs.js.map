{"version":3,"file":"redux-zero.cjs.js","sources":["../src/store/createStore.ts","../src/utils/shallowEqual.ts","../src/components/connect.tsx","../src/components/Provider.tsx"],"sourcesContent":["export default function createStore(state = {}) {\n  const listeners = []\n  return {\n    setState(update) {\n      state = { ...state, ...update }\n      listeners.forEach(f => f(state))\n    },\n    subscribe(f) {\n      listeners.push(f)\n    },\n    unsubscribe(f) {\n      const i = listeners.indexOf(f)\n      if (i > -1) {\n        listeners.splice(i, 1)\n      }\n    },\n    getState() {\n      return state\n    }\n  }\n}\n","export default function shallowEqual(a, b) {\n  for (const i in a) if (a[i] !== b[i]) return false\n  for (const i in b) if (!(i in a)) return false\n  return true\n}\n","import * as React from \"react\"\nimport shallowEqual from \"../utils/shallowEqual\"\n\nimport Props from \"../interfaces/Props\"\n\nexport default function connect(mapToProps) {\n  return Child =>\n    class Connected extends React.Component<Props, {}> {\n      state = this.getProps()\n      componentWillMount() {\n        this.props.store.subscribe(this.update)\n      }\n      componentWillUnmount() {\n        this.props.store.unsubscribe(this.update)\n      }\n      getProps() {\n        const state = (this.props.store && this.props.store.getState()) || {}\n        return mapToProps(state, this.props)\n      }\n      update = () => {\n        const mapped = this.getProps()\n        if (!shallowEqual(mapped, this.state)) {\n          this.setState(mapped)\n        }\n      }\n      render() {\n        return (\n          <Child store={this.props.store} {...this.props} {...this.state} />\n        )\n      }\n    }\n}\n","import * as React from \"react\"\n\nimport Props from \"../interfaces/Props\"\n\nexport default class Provider extends React.Component<Props, {}> {\n  render() {\n    const { children, store } = this.props\n\n    // Passing the store down to the children without using the context API\n    const childrenWithProps = React.cloneElement(\n      children as React.ReactElement<any>,\n      { store }\n    )\n\n    return React.Children.only(childrenWithProps)\n  }\n}\n"],"names":["tslib_1.__extends","React.createElement","React.Component","React.cloneElement","React.Children"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAAoC,KAAU;IAAV,sBAAA,EAAA,UAAU;IAC5C,IAAM,SAAS,GAAG,EAAE,CAAA;IACpB,OAAO;QACL,QAAQ,YAAC,MAAM;YACb,KAAK,gBAAQ,KAAK,EAAK,MAAM,CAAE,CAAA;YAC/B,SAAS,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;SACjC;QACD,SAAS,YAAC,CAAC;YACT,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;SAClB;QACD,WAAW,YAAC,CAAC;YACX,IAAM,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;YAC9B,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;gBACV,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;aACvB;SACF;QACD,QAAQ;YACN,OAAO,KAAK,CAAA;SACb;KACF,CAAA;CACF;;sBCpBoC,CAAC,EAAE,CAAC;IACvC,KAAK,IAAM,CAAC,IAAI,CAAC;QAAE,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAAE,OAAO,KAAK,CAAA;IAClD,KAAK,IAAM,CAAC,IAAI,CAAC;QAAE,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC;YAAE,OAAO,KAAK,CAAA;IAC9C,OAAO,IAAI,CAAA;CACZ;;iBCC+B,UAAU;IACxC,OAAO,UAAA,KAAK;QACV;YAAwBA,6BAA0B;YAAlD;gBAAA,qEAuBC;gBAtBC,WAAK,GAAG,KAAI,CAAC,QAAQ,EAAE,CAAA;gBAWvB,YAAM,GAAG;oBACP,IAAM,MAAM,GAAG,KAAI,CAAC,QAAQ,EAAE,CAAA;oBAC9B,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE;wBACrC,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;qBACtB;iBACF,CAAA;;aAMF;YArBC,sCAAkB,GAAlB;gBACE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aACxC;YACD,wCAAoB,GAApB;gBACE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aAC1C;YACD,4BAAQ,GAAR;gBACE,IAAM,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAA;gBACrE,OAAO,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;aACrC;YAOD,0BAAM,GAAN;gBACE,QACEC,oBAAC,KAAK,aAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IAAM,IAAI,CAAC,KAAK,EAAM,IAAI,CAAC,KAAK,EAAI,EACnE;aACF;YACH,gBAAC;SAAA,CAvBuBC,eAAe;KAuBtC,CAAA;CACJ;;AC3BD;IAAsCF,4BAA0B;IAAhE;;KAYC;IAXC,yBAAM,GAAN;QACQ,IAAA,eAAgC,EAA9B,sBAAQ,EAAE,gBAAK,CAAe;;QAGtC,IAAM,iBAAiB,GAAGG,kBAAkB,CAC1C,QAAmC,EACnC,EAAE,KAAK,OAAA,EAAE,CACV,CAAA;QAED,OAAOC,cAAc,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAA;KAC9C;IACH,eAAC;CAAA,CAZqCF,eAAe;;;;;;"}